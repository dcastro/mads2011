/*
* Slides, A Slideshow Plugin for jQuery
* Intructions: http://slidesjs.com
* By: Nathan Searles, http://nathansearles.com
* Version: 1.1.5
* Updated: March 7th, 2011
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
(function(a){a.fn.slides=function(b){return b=a.extend({},a.fn.slides.option,b),this.each(function(){function x(h,i,j){if(!q&&p){q=!0,b.animationStart(o+1);switch(h){case"next":m=o,l=o+1,l=e===l?0:l,s=f*2,h=-f*2,o=l;break;case"prev":m=o,l=o-1,l=l===-1?e-1:l,s=0,h=0,o=l;break;case"pagination":l=parseInt(j,10),m=a("."+b.paginationClass+" li.current a",c).attr("href").match("[^#/]+$"),l>m?(s=f*2,h=-f*2):(s=0,h=0),o=l}i==="fade"?b.crossfade?d.children(":eq("+l+")",c).css({zIndex:10}).fadeIn(b.fadeSpeed,b.fadeEasing,function(){b.autoHeight?d.animate({height:d.children(":eq("+l+")",c).outerHeight()},b.autoHeightSpeed,function(){d.children(":eq("+m+")",c).css({display:"none",zIndex:0}),d.children(":eq("+l+")",c).css({zIndex:0}),b.animationComplete(l+1),q=!1}):(d.children(":eq("+m+")",c).css({display:"none",zIndex:0}),d.children(":eq("+l+")",c).css({zIndex:0}),b.animationComplete(l+1),q=!1)}):d.children(":eq("+m+")",c).fadeOut(b.fadeSpeed,b.fadeEasing,function(){b.autoHeight?d.animate({height:d.children(":eq("+l+")",c).outerHeight()},b.autoHeightSpeed,function(){d.children(":eq("+l+")",c).fadeIn(b.fadeSpeed,b.fadeEasing)}):d.children(":eq("+l+")",c).fadeIn(b.fadeSpeed,b.fadeEasing,function(){a.browser.msie&&a(this).get(0).style.removeAttribute("filter")}),b.animationComplete(l+1),q=!1}):(d.children(":eq("+l+")").css({left:s,display:"block"}),b.autoHeight?d.animate({left:h,height:d.children(":eq("+l+")").outerHeight()},b.slideSpeed,b.slideEasing,function(){d.css({left:-f}),d.children(":eq("+l+")").css({left:f,zIndex:5}),d.children(":eq("+m+")").css({left:f,display:"none",zIndex:0}),b.animationComplete(l+1),q=!1}):d.animate({left:h},b.slideSpeed,b.slideEasing,function(){d.css({left:-f}),d.children(":eq("+l+")").css({left:f,zIndex:5}),d.children(":eq("+m+")").css({left:f,display:"none",zIndex:0}),b.animationComplete(l+1),q=!1})),b.pagination&&(a("."+b.paginationClass+" li.current",c).removeClass("current"),a("."+b.paginationClass+" li:eq("+l+")",c).addClass("current"))}}function y(){clearInterval(c.data("interval"))}function z(){b.pause?(clearTimeout(c.data("pause")),clearInterval(c.data("interval")),v=setTimeout(function(){clearTimeout(c.data("pause")),w=setInterval(function(){x("next",j)},b.play),c.data("interval",w)},b.pause),c.data("pause",v)):y()}a("."+b.container,a(this)).children().wrapAll('<div class="slides_control"/>');var c=a(this),d=a(".slides_control",c),e=d.children().size(),f=d.children().outerWidth(),h=d.children().outerHeight(),i=b.start-1,j=b.effect.indexOf(",")<0?b.effect:b.effect.replace(" ","").split(",")[0],k=b.effect.indexOf(",")<0?j:b.effect.replace(" ","").split(",")[1],l=0,m=0,n=0,o=0,p,q,r,s,t,u,v,w;if(e<2)return;i<0&&(i=0),i>e&&(i=e-1),b.start&&(o=i),b.randomize&&d.randomize(),a("."+b.container,c).css({overflow:"hidden",position:"relative"}),d.children().css({position:"absolute",top:0,left:d.children().outerWidth(),zIndex:0,display:"none"}),d.css({position:"relative",width:f*3,height:h,left:-f}),a("."+b.container,c).css({display:"block"}),b.autoHeight&&(d.children().css({height:"auto"}),d.animate({height:d.children(":eq("+i+")").outerHeight()},b.autoHeightSpeed));if(b.preload&&d.find("img").length){a("."+b.container,c).css({background:"url("+b.preloadImage+") no-repeat 50% 50%"});var A=d.find("img:eq("+i+")").attr("src")+"?"+(new Date).getTime();a("img",c).parent().attr("class")!="slides_control"?u=d.children(":eq(0)")[0].tagName.toLowerCase():u=d.find("img:eq("+i+")"),d.find("img:eq("+i+")").attr("src",A).load(function(){d.find(u+":eq("+i+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){a(this).css({zIndex:5}),a("."+b.container,c).css({background:""}),p=!0,b.slidesLoaded()})})}else d.children(":eq("+i+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){p=!0,b.slidesLoaded()});b.bigTarget&&(d.children().css({cursor:"pointer"}),d.children().click(function(){return x("next",j),!1})),b.hoverPause&&b.play&&(d.bind("mouseover",function(){y()}),d.bind("mouseleave",function(){z()})),b.generateNextPrev&&(a("."+b.container,c).after('<a href="#" class="'+b.prev+'">Prev</a>'),a("."+b.prev,c).after('<a href="#" class="'+b.next+'">Next</a>')),a("."+b.next,c).click(function(a){a.preventDefault(),b.play&&z(),x("next",j)}),a("."+b.prev,c).click(function(a){a.preventDefault(),b.play&&z(),x("prev",j)}),b.generatePagination?(c.append("<ul class="+b.paginationClass+"></ul>"),d.children().each(function(){a("."+b.paginationClass,c).append('<li><a href="#'+n+'">'+(n+1)+"</a></li>"),n++})):a("."+b.paginationClass+" li a",c).each(function(){a(this).attr("href","#"+n),n++}),a("."+b.paginationClass+" li:eq("+i+")",c).addClass("current"),a("."+b.paginationClass+" li a",c).click(function(){return b.play&&z(),r=a(this).attr("href").match("[^#/]+$"),o!=r&&x("pagination",k,r),!1}),a("a.link",c).click(function(){return b.play&&z(),r=a(this).attr("href").match("[^#/]+$")-1,o!=r&&x("pagination",k,r),!1}),b.play&&(w=setInterval(function(){x("next",j)},b.play),c.data("interval",w))})},a.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,paginationClass:"pagination",fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}},a.fn.randomize=function(b){function c(){return Math.round(Math.random())-.5}return a(this).each(function(){var d=a(this),e=d.children(),f=e.length;if(f>1){e.hide();var g=[];for(i=0;i<f;i++)g[g.length]=i;g=g.sort(c),a.each(g,function(a,c){var f=e.eq(c),g=f.clone(!0);g.show().appendTo(d),b!==undefined&&b(f,g),f.remove()})}})}})(jQuery)